<!DOCTYPE html>
<html>
<head>
<title>Example 5-10. Bluebird's promise.finally()</title>
<link href="../prism.css" rel="stylesheet">
<script src="../prism.js"></script>

<script src="https://cdn.jsdelivr.net/bluebird/2.9.27/bluebird.min.js"></script>
<script>
var Bluebird = Promise.noConflict();

function getData() {
	var timestamp = performance.now();
	return new Bluebird(function (resolve, reject) {
		// ...
		throw new Error('Unexpected problem');
	}).finally(function () {
		console.log('Data fetch took ' + (performance.now() - timestamp));
	});
}

getData();
</script>

</head>
<body>

<h1>Example 5-10. Bluebird's promise.finally()</h1>

<pre>
<code class="language-javascript">
function getData() {
	var timestamp = performance.now();
	return new Bluebird(function (resolve, reject) {
		// ...
		throw new Error('Unexpected problem');
	}).finally(function () {
		console.log('Data fetch took ' + (performance.now() - timestamp));
	});
}
</code>
</pre>

</body>
</html>
